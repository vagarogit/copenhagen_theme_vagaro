document.addEventListener("DOMContentLoaded",(()=>{!function(){try{if(!document.querySelector(".category-container"))return;const e=document.querySelector(".section-tree");if(!e)return;let t=document.getElementById("category-accordions-container");t||(t=document.createElement("div"),t.id="category-accordions-container",e.parentNode.insertBefore(t,e));const n=e.querySelectorAll(".section"),i=document.createElement("div");i.className="section-tree-accordion";let o=null;const a=(e,t,n)=>{e&&t&&(e.setAttribute("aria-expanded","false"),t.style.maxHeight=t.scrollHeight+"px",t.offsetHeight,t.style.maxHeight="0",n.classList.remove("expanded"),setTimeout((()=>{"false"===e.getAttribute("aria-expanded")&&(t.style.display="none")}),350))};n.forEach(((e,t)=>{const n=e.querySelector(".section-tree-title a"),r=e.querySelector(".article-list"),s=e.querySelector(".see-all-articles");if(!n)return;const l=document.createElement("div");l.className="accordion-item",l.setAttribute("data-section-index",t);const d=document.createElement("div");d.className="accordion-header",d.setAttribute("role","button"),d.setAttribute("aria-expanded","false"),d.setAttribute("aria-controls",`accordion-panel-${t}`),d.tabIndex=0;const c=document.createElement("h2");c.className="section-tree-title";const p=document.createElement("span");p.className="accordion-title-text",p.textContent=n.textContent.trim(),c.appendChild(p),c.setAttribute("data-section-url",n.getAttribute("href"));const u=document.createElement("span");u.className="accordion-icon",u.style.transition="transform 0.35s ease-in-out",u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>',d.appendChild(c),d.appendChild(u);const m=document.createElement("div");if(m.className="accordion-panel",m.id=`accordion-panel-${t}`,m.setAttribute("role","region"),m.setAttribute("aria-labelledby",d.id),m.style.display="none",m.style.transition="max-height 0.35s ease-in-out",m.style.maxHeight="0",m.style.overflow="hidden",r){const e=r.cloneNode(!0);if(m.appendChild(e),s){const e=document.createElement("div");e.className="loading-more-articles",e.textContent="Loading all articles...",m.appendChild(e);const t=n.getAttribute("href");fetch(t).then((e=>e.text())).then((t=>{const n=(new DOMParser).parseFromString(t,"text/html").querySelector(".article-list");if(n){const e=m.querySelector(".article-list");e&&e.replaceWith(n.cloneNode(!0))}e.parentNode&&e.remove()})).catch((t=>{const n=s.cloneNode(!0);m.appendChild(n),e.parentNode&&e.remove()}))}}else if(s){const e=s.cloneNode(!0);m.appendChild(e)}d.addEventListener("click",(()=>{if("true"===d.getAttribute("aria-expanded"))a(d,m,l),o=null;else{if(o){const{header:e,panel:t,item:n}=o;a(e,t,n)}d.setAttribute("aria-expanded","true"),m.style.display="block",m.style.maxHeight="0",m.offsetHeight,m.style.maxHeight=m.scrollHeight+"px",l.classList.add("expanded"),setTimeout((()=>{"true"===d.getAttribute("aria-expanded")&&(m.style.maxHeight="none")}),350),o={header:d,panel:m,item:l}}})),d.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),d.click())})),l.appendChild(d),l.appendChild(m),i.appendChild(l)})),t.appendChild(i),e.style.display="none"}catch(e){const t=document.querySelector(".section-tree");t&&(t.style.display="block")}}(),function(){try{const e=document.querySelectorAll(".section.accordion.sub-topic");if(!e.length)return;e.forEach(((e,t)=>{const n=e.querySelector(".panel-heading"),i=e.querySelector(".panel-body"),o=e.querySelector(".title");if(!n||!i||!o)return;const a=i.id||`sub-topic-panel-${t}`;if(i.id=a,n.setAttribute("role","button"),n.setAttribute("aria-expanded","false"),n.setAttribute("aria-controls",a),n.tabIndex=0,i.style.transition="max-height 0.35s ease-in-out, padding-top 0.35s ease-in-out, padding-bottom 0.35s ease-in-out",i.style.overflow="hidden",n.addEventListener("click",(()=>{"true"===n.getAttribute("aria-expanded")?(n.setAttribute("aria-expanded","false"),i.classList.remove("panel-body-expanded"),i.style.overflow="hidden",i.style.maxHeight=i.scrollHeight+"px",requestAnimationFrame((()=>{requestAnimationFrame((()=>{i.style.maxHeight="0px",i.style.paddingTop="0px",i.style.paddingBottom="0px"}))})),setTimeout((()=>{"false"===n.getAttribute("aria-expanded")&&(i.style.display="none")}),350)):(n.setAttribute("aria-expanded","true"),i.style.display="block",i.style.overflow="hidden",i.style.maxHeight="0px",i.style.paddingTop="0px",i.style.paddingBottom="0px",requestAnimationFrame((()=>{requestAnimationFrame((()=>{const e=i.scrollHeight;i.style.maxHeight=e+"px",i.style.paddingTop="1rem",i.style.paddingBottom="1rem"}))})),setTimeout((()=>{"true"===n.getAttribute("aria-expanded")&&(i.style.maxHeight="none",i.style.overflow="visible",i.classList.add("panel-body-expanded"))}),350))})),n.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),n.click())})),!n.querySelector(".accordion-icon")){const e=document.createElement("span");e.className="accordion-icon",e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>',n.appendChild(e)}i.style.display="none",i.style.maxHeight="0px"}))}catch(e){}}()}));
