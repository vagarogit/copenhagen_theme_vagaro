document.addEventListener("DOMContentLoaded",(()=>{!function(){try{if(!document.querySelector(".category-container"))return;const e=document.querySelector(".section-tree");if(!e)return;let t=document.getElementById("category-accordions-container");t||(t=document.createElement("div"),t.id="category-accordions-container",e.parentNode.insertBefore(t,e));const n=e.querySelectorAll(".section"),i=document.createElement("div");i.className="section-tree-accordion";let o=null;const r=(e,t,n)=>{e&&t&&(e.setAttribute("aria-expanded","false"),t.style.height=t.scrollHeight+"px",t.offsetHeight,t.style.height="0",n.classList.remove("expanded"),setTimeout((()=>{"false"===e.getAttribute("aria-expanded")&&(t.style.display="none")}),350))};n.forEach(((e,t)=>{const n=e.querySelector(".section-tree-title a"),a=e.querySelector(".article-list"),l=e.querySelector(".see-all-articles");if(!n)return;const s=document.createElement("div");s.className="accordion-item",s.setAttribute("data-section-index",t);const c=document.createElement("div");c.className="accordion-header",c.setAttribute("role","button"),c.setAttribute("aria-expanded","false"),c.setAttribute("aria-controls",`accordion-panel-${t}`),c.tabIndex=0;const d=document.createElement("h2");d.className="section-tree-title";const u=document.createElement("span");u.className="accordion-title-text",u.textContent=n.textContent.trim(),d.appendChild(u),d.setAttribute("data-section-url",n.getAttribute("href"));const p=document.createElement("span");p.className="accordion-icon",p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>',c.appendChild(d),c.appendChild(p);const h=document.createElement("div");if(h.className="accordion-panel",h.id=`accordion-panel-${t}`,h.setAttribute("role","region"),h.setAttribute("aria-labelledby",c.id),h.style.display="none",a){const e=a.cloneNode(!0);h.appendChild(e)}if(l){const e=l.cloneNode(!0);h.appendChild(e)}c.addEventListener("click",(()=>{if("true"===c.getAttribute("aria-expanded"))r(c,h,s),o=null;else{if(o){const{header:e,panel:t,item:n}=o;r(e,t,n)}c.setAttribute("aria-expanded","true"),h.style.display="block",h.style.height="0",h.offsetHeight,h.style.height=h.scrollHeight+"px",s.classList.add("expanded"),setTimeout((()=>{"true"===c.getAttribute("aria-expanded")&&(h.style.height="auto")}),350),o={header:c,panel:h,item:s}}})),c.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),c.click())})),s.appendChild(c),s.appendChild(h),i.appendChild(s)})),t.appendChild(i),e.style.display="none"}catch(e){console.error("Error initializing accordions:",e);const t=document.querySelector(".section-tree");t&&(t.style.display="block")}}(),function(){try{const e=document.querySelectorAll(".section.accordion.sub-topic");if(!e.length)return;e.forEach(((e,t)=>{const n=e.querySelector(".panel-heading"),i=e.querySelector(".panel-body"),o=e.querySelector(".title");if(!n||!i||!o)return;const r=i.id||`sub-topic-panel-${t}`;if(i.id=r,n.setAttribute("role","button"),n.setAttribute("aria-expanded","false"),n.setAttribute("aria-controls",r),n.tabIndex=0,i.style.transition="height 0.35s ease-in-out",n.addEventListener("click",(()=>{"true"===n.getAttribute("aria-expanded")?(n.setAttribute("aria-expanded","false"),i.style.height=i.scrollHeight+"px",i.offsetHeight,i.style.height="0px",setTimeout((()=>{"false"===n.getAttribute("aria-expanded")&&(i.style.display="none")}),350)):(n.setAttribute("aria-expanded","true"),i.style.display="block",i.style.height="0px",i.offsetHeight,i.style.height=i.scrollHeight+"px",setTimeout((()=>{"true"===n.getAttribute("aria-expanded")&&(i.style.height="auto")}),350))})),n.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),n.click())})),!n.querySelector(".accordion-icon")){const e=document.createElement("span");e.className="accordion-icon",e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>',n.appendChild(e)}i.style.display="none",i.style.height="0px"}))}catch(e){console.error("Error initializing sub-topic accordions:",e)}}()}));
